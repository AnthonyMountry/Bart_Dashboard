<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Home Dashboard</title>
        <link rel="icon" href="/img/favicon.ico" type="image/x-icon">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        <link rel="stylesheet" href="/css/styles.css">
        <link rel="stylesheet" href="/css/dashboard_content.css">
        <script>
            // TODO(harry) this variable should be set using a server side template
            const BASE_URL = 'http://127.0.0.1:5000';
        </script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    </head>


    <body>

        <section class = "sideMenu">
            <nav>
                <a href ="/index" class = "active"><i class="fa fa-home" aria-hidden = "true"></i> Dashboard </a>
            <!---  <a href ="/Reports.html"><i class="fa fa-sticky-note-o" aria-hidden = "true"></i> Reports </a> -->
                <a href ="/analytics"><i class="fa fa-bar-chart" aria-hidden = "true"></i> Analytics</a>

            </nav>
        </section>

        <header>

            <div class = "search">
                <i class="fa fa-search" aria-hidden = "true"></i>
                <input type = "text" name = "" value = "">
            </div>

            <div class = "accountInfo">
                <a href = "#" class = "userName">Name</a>
                <a href = "#" class = notifications><i class="fa fa-bell-o" aria-hidden = "true"></i>
                    <span class = "notificationNum">
                        #
                    </span>
                </a>
            </div>
        </header>

        <section id = "dashContent">

            <div class = "heading">
                <h1>Dashboard</h1>
            </div>

            <div class = "totals">

                <div class = "firstTotal">
                    <span >Total Sales</span>
                    value
                </div>

                <div class = "secondTotal">
                    <span>Total Income</span>
                    value
                </div>

            </div>

            <div class = "dashboardCharts">
                <div class = "dashChart1">
                    <span class = title>
                        Asset Meter Readings
                    </span>
                    <canvas id="meterReadingsChart"></canvas>
                </div>

                <div class = "dashChart2">
                    <span class = title>
                        Meter Status
                    </span>
                </div>
            </div>

            <div class = "updateList">

                <table class = "updateTable">
                    <span class = "recentUpdates">Recent Update</span>
                    <a>icon</a>
                    <thead>
                        <tr>
                            <th>
                                ####
                            </th>
                            <th>
                                ######
                            </th>

                        </tr>
                    </thead>

                    <tbody>
                        <tr></tr>
                    </tbody>
                </table>
            </div>

            <button id="assetsToggle">Toggle assets</button>
            <table
             class="assetsTable"
             id="assetsTable"
             style="width: 80%; text-align: left;"
            >
                <!-- API call results go here -->
            </table>
            <!-- <button id="showMoreAssets">show more...</button> -->
        </section>

    </body>
    <script src="/js/graph.js"></script>
    <script src="/js/asset.js"></script>
    <script>
        // render the testing graph when the pages loads
        window.onload = () => {
            const ctx = document
                .getElementById('meterReadingsChart')
                .getContext('2d');
            window.myScatter = testGraph(ctx);
        }

        let table = new AssetTable("assetsTable");
        const assetsToggle = document.getElementById("assetsToggle");
        assetsToggle.addEventListener("click", (event) => {
            table.toggle();
        });
    </script>

    <!-- <script>
        async function GetData(url = '', data = {}) {
    // Default options are marked with *
    const response = await fetch(url, {
    method: 'GETT', // *GET, POST, PUT, DELETE, etc.
    mode: 'cors', // no-cors, *cors, same-origin
    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
    credentials: 'same-origin', // include, *same-origin, omit
    headers: {
      'Content-Type': 'application/json'
      // 'Content-Type': 'application/x-www-form-urlencoded',
    },
    redirect: 'follow', // manual, *follow, error
    referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
    body: JSON.stringify(data) // body data type must match "Content-Type" header
    });
    return response.json(); // parses JSON response into native JavaScript objects
}

GetData('http://127.0.0.1:5000/', { /* TODO */ })//replace TODO with data
  .then(data => {
    console.log('Success: ', data); // JSON data parsed by `data.json()` call
 });
    </script> -->
</html>
